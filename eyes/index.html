<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Occhi responsive</title>
<style>
  html,body{height:100%;margin:0;padding:0;overflow:hidden}
  *{box-sizing:border-box}

  :root{
    --eye: clamp(32px, 6vw, 80px);
    --pupil: calc(var(--eye)*0.38);
    --gap: clamp(12px, 4vw, 32px);
    --pad: clamp(12px, 4vw, 32px);
  }

  /* fallback ratio: verrà aggiornato via JS */
  .frame{
    display: block;
    aspect-ratio: 16 / 9;
    width: 100%;
    max-width: 1000px;
    margin: 0 auto;
    position: relative;
    overflow: hidden;
    background:#000;
  }

  /* immagine sempre intera */
  .bg{
    display: block;
    position:absolute; inset:0;
    width:100%; height:100%;
    object-fit: contain;       /* nessun taglio */
    object-position:center;
    pointer-events:none;
    
  }

  /* occhi centrati */
  .eyes{position:absolute; inset:0; display:grid; place-items:center}
  .row{display:flex; gap:var(--gap); align-items:center; justify-content:center; transform:translateZ(0)}
  .eye{width:var(--eye); height:var(--eye); background:#fff; border:max(2px, calc(var(--eye)*0.05)) solid #222; border-radius:50%; position:relative; box-shadow:0 3px 8px rgba(0,0,0,.25) inset}
  .pupil{width:var(--pupil); height:var(--pupil); background:#222; border-radius:50%; position:absolute; top:50%; left:50%; translate:-50% -50%; transition:transform .05s linear}

  @media (max-width: 480px){
    :root{ --gap: clamp(12px, 5vw, 24px); }
  }
  @media (prefers-reduced-motion: reduce){
    .pupil{ transition:none; }
    body{ scroll-behavior:auto; }
  }
</style>
</head>
<body>
  <div class="frame">
    <img class="bg" src="img/sl_logo.png" alt="">
    <div class="eyes">
      <div class="row">
        <div class="eye"><div class="pupil"></div></div>
        <div class="eye"><div class="pupil"></div></div>
      </div>
    </div>
  </div>

<script>
  // imposta aspect-ratio = dimensioni reali dell’immagine
  const img = document.querySelector('.bg');
  const frame = document.querySelector('.frame');
  function setRatio(){
    if (img.naturalWidth && img.naturalHeight){
      frame.style.aspectRatio = `${img.naturalWidth} / ${img.naturalHeight}`;
    }
  }
  if (img.complete) setRatio(); else img.addEventListener('load', setRatio);

  // occhi che seguono il puntatore (mouse o touch)
  function onMove(x, y){
    document.querySelectorAll('.eye').forEach(eye => {
      const p = eye.querySelector('.pupil');
      const r = eye.getBoundingClientRect();
      const dx = x - (r.left + r.width/2);
      const dy = y - (r.top  + r.height/2);
      const a = Math.atan2(dy, dx);
      const max = r.width * 0.22;
      const d = Math.min(max, Math.hypot(dx, dy) * 0.2);
      p.style.transform = `translate(${Math.cos(a)*d}px, ${Math.sin(a)*d}px)`;
    });
  }
  document.addEventListener('mousemove', e => onMove(e.clientX, e.clientY), {passive:true});
  document.addEventListener('pointermove', e => onMove(e.clientX, e.clientY), {passive:true});
</script>
</body>
</html>
